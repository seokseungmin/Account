# ⚙ 계좌 관리 시스템
사용자와 계좌 정보를 저장하고 있으며, 외부 시스템에서 거래를 요청할 경우 거래 정보를 받아서 계좌에서 잔액을 거래 금액만큼 줄이거나(결제), 거래 금액만큼 늘리는(결제 취소) 거래 관리 기능을 제공하는 시스템입니다.

- **계좌 API**: 계좌 추가, 계좌 해지, 계좌 확인
- **거래 API**: 잔액 사용, 잔액 사용 취소, 거래 확인
- **사용자당 최대 보유 가능 계좌**: 10개
- **계좌 번호**: 10자리 정수, 중복 불가능, 순차 증가

# 🔎 요구 사항
- **Spring Boot** + **Java** 활용
- **H2 DB**(MEMORY DB 모드) 활용
- **Spring Data JPA**를 활용하여 DB 접근
- **Embedded Redis** 활용
- API Request Body, Response Body는 **JSON** 타입으로 표현
- 각각의 API들은 각자의 요청과 응답 객체 구조를 가지며, 요청을 처리하다 실패하는 경우의 응답은 공통된 구조를 가짐

# 📃 각 API 명세서

## ✔ 사용자
어플리케이션이 구동될 때 사용자 정보를 자동 저장합니다.

## ✔ 계좌
### 🔹 계좌 생성 API
- **파라미터**: 사용자 아이디, 초기 잔액
- **실패 응답**: 사용자가 없는 경우, 계좌가 10개인 경우
- **성공 응답**: 사용자 아이디, 계좌 번호, 등록일시

### 🔹 계좌 해지 API
- **파라미터**: 사용자 아이디, 계좌 번호
- **실패 응답**: 사용자가 없는 경우, 계좌가 없는 경우, 사용자 아이디와 계좌 소유주가 다른 경우, 계좌가 이미 해지 상태인 경우, 잔액이 있는 경우
- **성공 응답**: 사용자 아이디, 계좌 번호, 해지일시

### 🔹 계좌 확인 API
- **파라미터**: 사용자 아이디
- **실패 응답**: 사용자가 없는 경우
- **성공 응답**: List<계좌 번호, 잔액>

## ✔ 거래
### 🔹 잔액 사용 API
- **파라미터**: 사용자 아이디, 계좌 번호, 거래 금액
- **실패 응답**: 사용자가 없는 경우, 사용자 아이디와 계좌 소유주가 다른 경우, 계좌가 이미 해지 상태인 경우, 거래 금액이 잔액보다 큰 경우, 거래 금액이 너무 작거나 큰 경우
  - 해당 계좌에서 거래(사용, 사용 취소)가 진행 중일 때 다른 거래 요청이 오는 경우 해당 거래가 동시에 잘못 처리되는 것 방지
- **성공 응답**: 계좌 번호, 거래 결과 코드(성공/실패), 거래 아이디, 거래 금액, 거래일시

### 🔹 잔액 사용 취소 API
- **파라미터**: 거래 아이디, 계좌 번호, 취소 요청 금액
- **실패 응답**: 거래 아이디에 해당하는 거래가 없는 경우, 계좌가 없는 경우, 거래와 계좌가 일치하지 않는 경우, 거래 금액과 거래 취소 금액이 다른 경우(부분 취소 불가능)
  - 1년이 넘은 거래는 사용 취소 불가능
  - 해당 계좌에서 거래(사용, 사용 취소)가 진행 중일 때 다른 거래 요청이 오는 경우 해당 거래가 동시에 잘못 처리되는 것 방지
- **성공 응답**: 계좌 번호, 거래 결과 코드(성공/실패), 거래 아이디, 거래 금액, 거래일시

### 🔹 거래 확인 API
- **파라미터**: 거래 아이디
- **실패 응답**: 해당 거래 아이디의 거래가 없는 경우
- **성공 응답**: 계좌 번호, 거래 종류(잔액 사용, 잔액 사용 취소), 거래 결과 코드(성공/실패), 거래 아이디, 거래 금액, 거래일시
  - 실패한 거래(사용/사용취소) 또한 확인 필요
